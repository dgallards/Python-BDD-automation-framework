<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <title>Global Test Report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
        }

        .status-badge {
            text-transform: capitalize;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <div class="text-center mb-4">
            <h1 class="display-5"><i class="fa-solid fa-clipboard-list"></i> Global Test Report</h1>
            <p class="text-muted">Overview of all features and their execution status</p>
        </div>

        <table id="featuresTable" class="table table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                    <th>Feature Name</th>
                    <th>Status</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody>
                {% for feature in features %}
                <tr>
                    <td>{{ feature.name }}</td>
                    <td>
                        <span class="badge 
                        {% if feature.status == 'passed' %} bg-success
                        {% elif feature.status == 'failed' %} bg-danger
                        {% elif feature.status == 'skipped' %} bg-warning text-dark
                        {% else %} bg-secondary
                        {% endif %}
                        status-badge">
                            {{ feature.status }}
                        </span>
                    </td>
                    <td><a href="{{ feature.file }}" class="btn btn-sm btn-outline-primary" target="_blank">View
                            Report</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div> <!-- JS libraries -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script> $(document).ready(function () { $('#featuresTable').DataTable({ paging: true, searching: true, info: true, responsive: true }); }); // Feature status counts const statusCounts = { passed: {{ features | selectattr('status', 'equalto', 'passed') | list | length }}, failed: {{ features | selectattr('status', 'equalto', 'failed') | list | length }}, skipped: {{ features | selectattr('status', 'equalto', 'skipped') | list | length }}, other: {{ features | rejectattr('status', 'in', ['passed', 'failed', 'skipped']) | list | length }} }; const ctx = document.getElementById('statusChart').getContext('2d'); const statusChart = new Chart(ctx, { type: 'pie', data: { labels: ['Passed', 'Failed', 'Skipped', 'Other'], datasets: [{ label: 'Feature Status', data: [ statusCounts.passed, statusCounts.failed, statusCounts.skipped, statusCounts.other ], backgroundColor: [ 'rgba(40, 167, 69, 0.7)', // green 'rgba(220, 53, 69, 0.7)', // red 'rgba(255, 193, 7, 0.7)', // yellow 'rgba(108, 117, 125, 0.7)' // gray ], borderColor: '#ffffff', borderWidth: 2 }] }, options: { responsive: true, plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Feature Execution Status Distribution' } } } }); </script>


</body>

</html>